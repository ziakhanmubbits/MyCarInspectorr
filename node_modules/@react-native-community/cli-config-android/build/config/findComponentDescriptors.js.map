{"version":3,"names":["findComponentDescriptors","packageRoot","jsSrcsDir","packageJson","fs","readFileSync","path","join","JSON","parse","codegenConfig","error","globPattern","files","glob","sync","cwd","unixifyPaths","onlyFiles","ignore","codegenComponent","map","filePath","extractComponentDescriptors","filter","Boolean","Array","from","Set"],"sources":["../../src/config/findComponentDescriptors.ts"],"sourcesContent":["import fs from 'fs';\nimport path from 'path';\nimport glob from 'fast-glob';\nimport {extractComponentDescriptors} from './extractComponentDescriptors';\nimport {unixifyPaths} from '@react-native-community/cli-tools';\n\nexport function findComponentDescriptors(packageRoot: string) {\n  let jsSrcsDir = null;\n  try {\n    const packageJson = fs.readFileSync(\n      path.join(packageRoot, 'package.json'),\n      'utf8',\n    );\n    jsSrcsDir = JSON.parse(packageJson).codegenConfig.jsSrcsDir;\n  } catch (error) {\n    // no jsSrcsDir, continue with default glob pattern\n  }\n  const globPattern = jsSrcsDir\n    ? `${jsSrcsDir}/**/+(*.js|*.jsx|*.ts|*.tsx)`\n    : '**/+(*.js|*.jsx|*.ts|*.tsx)';\n  const files = glob.sync(globPattern, {\n    cwd: unixifyPaths(packageRoot),\n    onlyFiles: true,\n    ignore: ['**/node_modules/**'],\n  });\n  const codegenComponent = files\n    .map((filePath) =>\n      fs.readFileSync(path.join(packageRoot, filePath), 'utf8'),\n    )\n    .map(extractComponentDescriptors)\n    .filter(Boolean);\n\n  // Filter out duplicates as it happens that libraries contain multiple outputs due to package publishing.\n  // TODO: consider using \"codegenConfig\" to avoid this.\n  return Array.from(new Set(codegenComponent as string[]));\n}\n"],"mappings":";;;;;;AAAA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAA+D;AAExD,SAASA,wBAAwB,CAACC,WAAmB,EAAE;EAC5D,IAAIC,SAAS,GAAG,IAAI;EACpB,IAAI;IACF,MAAMC,WAAW,GAAGC,aAAE,CAACC,YAAY,CACjCC,eAAI,CAACC,IAAI,CAACN,WAAW,EAAE,cAAc,CAAC,EACtC,MAAM,CACP;IACDC,SAAS,GAAGM,IAAI,CAACC,KAAK,CAACN,WAAW,CAAC,CAACO,aAAa,CAACR,SAAS;EAC7D,CAAC,CAAC,OAAOS,KAAK,EAAE;IACd;EAAA;EAEF,MAAMC,WAAW,GAAGV,SAAS,GACxB,GAAEA,SAAU,8BAA6B,GAC1C,6BAA6B;EACjC,MAAMW,KAAK,GAAGC,mBAAI,CAACC,IAAI,CAACH,WAAW,EAAE;IACnCI,GAAG,EAAE,IAAAC,wBAAY,EAAChB,WAAW,CAAC;IAC9BiB,SAAS,EAAE,IAAI;IACfC,MAAM,EAAE,CAAC,oBAAoB;EAC/B,CAAC,CAAC;EACF,MAAMC,gBAAgB,GAAGP,KAAK,CAC3BQ,GAAG,CAAEC,QAAQ,IACZlB,aAAE,CAACC,YAAY,CAACC,eAAI,CAACC,IAAI,CAACN,WAAW,EAAEqB,QAAQ,CAAC,EAAE,MAAM,CAAC,CAC1D,CACAD,GAAG,CAACE,wDAA2B,CAAC,CAChCC,MAAM,CAACC,OAAO,CAAC;;EAElB;EACA;EACA,OAAOC,KAAK,CAACC,IAAI,CAAC,IAAIC,GAAG,CAACR,gBAAgB,CAAa,CAAC;AAC1D"}